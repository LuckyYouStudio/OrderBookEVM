# OrderBook DEX 前端配置指南

## 🚀 快速开始

### 1. 服务状态
- ✅ **Hardhat节点**: http://127.0.0.1:8545 (运行中)
- ✅ **前端应用**: http://localhost:3000 (运行中)
- ✅ **智能合约**: 已部署到本地网络

### 2. 合约地址
```javascript
TokenRegistry: 0x9A9f2CCfdE556A7E9Ff0848998Aa4a0CFD8863AE
OrderBook: 0x68B1D87F95878fE05B998F19b66F4baba5De1aed
Settlement: 0x3Aa5ebB10DC797CAC828524e59A333d0A371443c
Mock USDC: 0x59b670e9fA9D0A427751Af201D676719a970857b
Mock WETH: 0x4ed7c70F96B99c776995fB64377f0d4aB3B0e1C1
```

## 📱 使用步骤

### 步骤1: 安装MetaMask
1. 安装MetaMask浏览器插件
2. 创建或导入钱包

### 步骤2: 连接本地网络
1. 访问 http://localhost:3000
2. 点击 "Connect Wallet" 按钮
3. 应用会自动添加本地Hardhat网络到MetaMask
4. 确认网络切换

### 步骤3: 导入测试账户 (可选)
使用以下测试账户私钥导入到MetaMask:

**账户1:**
- 地址: `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266`
- 私钥: `0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80`

**账户2:**
- 地址: `0x70997970C51812dc3A010C7d01b50e0d17dc79C8`
- 私钥: `0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d`

⚠️ **重要**: 这些是测试私钥，仅用于开发环境，切勿在主网使用！

### 步骤4: 开始测试
1. 连接钱包后，应该看到绿色的网络状态指示器
2. 测试代币交易功能
3. 体验订单簿交易

## 🛠️ 技术架构

### 前端技术栈
- **React**: 前端框架
- **Vite**: 构建工具
- **ethers.js**: Web3库
- **React Query**: 状态管理

### 智能合约集成
- **自动网络检测**: 应用会检测是否连接到正确的网络
- **合约ABI**: 预配置所有合约接口
- **错误处理**: 完善的错误提示和处理机制

## 🔧 开发功能

### 钱包集成
- [x] MetaMask连接
- [x] 自动网络添加/切换
- [x] 账户变更监听
- [x] 网络状态显示

### 合约交互
- [x] ERC20代币操作
- [x] 订单簿功能
- [x] 结算合约集成
- [x] 实时余额查询

## 🐛 故障排除

### 网络连接问题
- 确保Hardhat节点在运行 (端口8545)
- 检查MetaMask网络配置
- 刷新页面重新连接

### 交易失败
- 确保账户有足够ETH作为Gas费
- 检查代币授权状态
- 查看浏览器控制台错误信息

### 余额显示问题
- 等待区块确认
- 手动刷新余额
- 检查合约地址配置

## 📊 测试场景

### 基础功能测试
1. **钱包连接**: 连接MetaMask，切换账户
2. **代币余额**: 查看USDC和WETH余额
3. **网络状态**: 确认连接到本地网络

### 交易功能测试
1. **存入代币**: 将ERC20代币存入Settlement合约
2. **下单交易**: 创建买单/卖单
3. **取消订单**: 取消未成交订单
4. **提取代币**: 从Settlement合约提取代币

## 🎯 下一步开发

### 待完成功能
- [ ] 实时价格图表
- [ ] 订单簿深度显示  
- [ ] 交易历史记录
- [ ] 用户持仓管理

### 性能优化
- [ ] WebSocket实时数据
- [ ] 缓存策略优化
- [ ] 批量查询优化

---

**开发环境已就绪，开始您的DEX之旅！** 🚀